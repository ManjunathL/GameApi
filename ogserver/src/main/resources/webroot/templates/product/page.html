<section id="portfolio" class="bg-light-gray top80 padding-top50">
    <div class="container">
        <div class="row padding20-0" id="layout-view">
            <div class="col-lg-4">
                <h3 class="design-count margin0"><%= collection.length %> Designs Found</h3>
            </div>
            <div class="col-lg-5 paddingtop10">
                <div id="filtered-list">
                <% if(typeof(filter.selectedSubCategoriesName) !== 'undefined'){ %>
                    <% _.each(filter.selectedSubCategoriesName, function(subcatname){ %>
                    <span class="font-size14 border1 "><%= subcatname %>   <a href="javascript:void(0);" onclick="removeSubcategories('<%= subcatname %>')">X</a></span>
                    <% }); %>
                <% } %>

                <% if((typeof(filter.minPrice) !== 'undefined' && typeof(filter.maxPrice) !== 'undefined') && ((filter.maxPrice !=  filter.maxPriceLimit) && (filter.minPrice != filter.minPriceLimit))){ %>
                    <span class="font-size14 border1 "><%= '&#8377;'+filter.minPrice+' - '+ filter.maxPrice %><a href="javascript:void(0);" onclick="removePrice()">X</a></span>
                <% } %>
                <span class="font-size14 border1"><span class="round-bk1 dot"></span> X</span>
                <span class="font-size14 border1"><span class="round-bk2 dot"></span> X</span>
                <span class="font-size14 border1"><span class="round-bk2 dot"></span> X</span>
                <span class="font-size14 more-lnk" onclick="showFiltersection();">More</span>
                    </div>
            </div>
            <div class="col-lg-3">
                <div class="row padding-right15">
                    <span class="glyphicon glyphicon-th-full view-select float-right">
                        <div class="outerbox">
                            <div class="innerbox">
                            </div>
                        </div>
                    </span>
                    <span class="glyphicon glyphicon-th view-select float-right border-right0"></span>
                    <span class="glyphicon glyphicon-th-large view-select float-right border-right0 active"></span>
                    <span class="glyphicon glyphicon-th-list view-select float-right border-right0"></span>
                    <span class="button float-right filter-btn" onclick="showFiltersection();">Filter&nbsp;<span class="fa fa-chevron-down"></span></span>
                </div>
            </div>
        </div>
        <div class="row filter-section" id="filter-section">
            <div id="filter-inside" class="col-md-12">
                <!--<div class="close" title="Close" data-toggle="collapse" data-target="#filter-inside"><i class="glyphicon glyphicon-remove-circle"></i></div>-->
              <div class="col-md-12">
                <div class="row filter-group">
                <div class="fname col-md-2">Sub-Categories</div>
                <div id="subcategory" class="filter-list col-md-10">
                  <div class="btn-group">
                      <% if(typeof(subcategoriesList) !== 'undefined'){ %>
                      <% _.each(subcategoriesList, function(subcat){ %>

                              <span
                                      class="subcategorycls font-size14 border1
                                     <% if(typeof(filter.selectedSubCategoriesName) !== 'undefined'){ %>
                          <% _.each(filter.selectedSubCategoriesName, function(subcatname){ %>
                                      <% if(subcat.name == subcatname){ %> noclick <% } %>
                                      <% }); %>
                          <% } %>"
                                      id="<%= subcat.id %>"
                                      title="<%= subcat.name %>"
                                      onclick="getsubcategoryId(this.id,this.title)"><%= subcat.name %>
                              </span>

                      <% }); %>
                      <% } %>
                  </div>
                </div>
                </div>
                <div class="row filter-group">
                    <div class="fname col-md-2">Price</div>
                    <div class="filter-list col-md-10">
                        <div class="btn-group">

                            <p>
                                <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;">
                            </p>
                            <div id="slider-range"></div>

                    </div>
                </div>
                <div class="row filter-group">
                    <div class="col-md-2 fname">Color</div>
                    <div class="col-md-6 filter-list">
                        <div class="color-rounds round-bk1">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk2">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk3">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk4">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk5">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk3">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk4">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk5">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk3">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk4">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                        <div class="color-rounds round-bk5">
                            <span class="glyphicon glyphicon-ok"></span>
                            <span class="glyphicon glyphicon-remove"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="row padding0 align-right font-size12 sortby">
                            Sort By:
                            <span class="sort-list"><a href="javascript:void(0);" id="popularity" rel="desc" onclick="setSorting(this.id,this.rel);">Popular</a></span>
                            <span class="sort-list"><a href="javascript:void(0);" id="relevance" rel="desc" onclick="setSorting(this.id,this.rel);">Relevance</a></span>
                            <span class="sort-list"><a href="javascript:void(0);" id="defaultPrice" rel="<%= filter.sortDir %>" onclick="setSorting(this.id,this.rel);">
                                Price
                                <% if (filter.sortDir === 'desc') { %>
                                <span class="fa fa-sort-amount-desc fa-md"></span>
                                <% } else if (filter.sortDir === 'asc') { %>
                                <span class="fa fa-sort-amount-asc fa-md"></span>
                                <% } %>
                            </a></span>
                        </div>
                    </div>
                </div>
                  </div>
            </div>
        </div>
</div>
    <div class="listing">


    </div>
    <a style="display: block;" href="#" class="back-to-top">
        <span class="fa fa-chevron-up"></span>
    </a>
</div>
    </div>
</section>
<script>
    $(document).ready(function(){

        var offset = 100;
        var duration = 500;
        $(window).scroll(function() {
            if ($(this).scrollTop() > offset) {
                $('.back-to-top').fadeIn(duration);
            } else {
                $('.back-to-top').fadeOut(duration);
            }
        });

        $('.back-to-top').click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, duration);
            return false;
        });

        $('.portfolio-link').hover(function(){
            var over = $(this).find('.image-meta');
            var h = $(this).find('h2');
            var txt = $(this).find('.image-text');
            over.fadeIn('slow');
            h.animate({bottom: '10%'});
            txt.animate({bottom: '20%'});
        }, function(){
            $('.image-meta').fadeOut('fast');
            $('h2').css('bottom','0');
            $('.image-text').css('bottom','0');
        });

        $("#wish").click(function() {
            if($(this).hasClass('glyphicon-heart')){
                $(this).removeClass('glyphicon-heart').addClass('glyphicon-heart-empty');
                $('.super-script').hide();
            }else{
                $(this).removeClass('glyphicon-heart-empty').addClass('glyphicon-heart');
                $('.super-script').show();
            }
        });


        $('.glyphicon-th').click(function() {
            $(this).addClass('active');
            $('.glyphicon-th-large').removeClass('active');
            $('.glyphicon-th-list').removeClass('active');
            $('.glyphicon-th-full').removeClass('active');
            $('.grid-view').css ('display','block');
            $('.list-view').css('display','none');
            $('h2').css('font-size','20px');
            $('.img-titl').css('font-size','15px');
            $('.portfolio-item').removeClass('col-md-6').addClass('col-md-4');
            $('.image-meta').css({'padding-top':'14%', 'padding-right':'5%', 'padding-bottom':'5%;'});
        });

        $('.glyphicon-th-large').click(function() {
            $(this).addClass('active');
            $('.glyphicon-th').removeClass('active');
            $('.glyphicon-th-list').removeClass('active');
            $('.glyphicon-th-full').removeClass('active');
            $('.grid-view').css ('display','block');
            $('.list-view').css('display','none');
            $('h2').css('font-size','30px');
            $('.portfolio-item').removeClass('col-md-4').addClass('col-md-6');
            $('.image-meta').css({'padding-top':'18%', 'padding-right':'5%', 'padding-bottom':'5%;'});
        });

        $('.glyphicon-th-list').click(function() {
            $(this).addClass('active');
            $('.glyphicon-th-large').removeClass('active');
            $('.glyphicon-th').removeClass('active');
            $('.glyphicon-th-full').removeClass('active');
            $('.grid-view').css ('display','none');
            $('.list-view').css('display','block');
            $('.col-7-img').removeClass('col-md-12').addClass('col-md-7');
            $('.col-5-txt').removeClass('col-md-12').addClass('col-md-5');
            $('h2').css('font-size','25px');
            $('.col-5-txt').css('padding-top','0px');
            $('.dimsn').css('display','block');
        });

        $('.glyphicon-th-full').click(function() {
            $(this).addClass('active');
            $('.glyphicon-th-large').removeClass('active');
            $('.glyphicon-th').removeClass('active');
            $('.glyphicon-th-list').removeClass('active');
            $('.grid-view').css ('display','none');
            $('.list-view').css('display','block');
            $('.col-7-img').removeClass('col-md-7').addClass('col-md-12');
            $('.col-5-txt').removeClass('col-md-5').addClass('col-md-12');
            $('h2').css('font-size','25px');
            $('.col-5-txt').css('padding-top','20px');
            $('.dimsn').css('display','none');

        });
    });
    /* Subcategory filter */

    var subcatNameArr = new Array();
    function getsubcategoryId(id,title){
        var subcatArr = filter.get('subcategoryIds');
        var subcatNameArr = filter.get('selectedSubCategoriesName');
        subcatArr.push(id);
        subcatNameArr.push(title);
        //alert(subcatArr);
        filter.set({'subcategoryIds':subcatArr});
        filter.set({'selectedSubCategoriesName':subcatNameArr});
        filter.trigger('change');
    }
    function removeSubcategories(subcatnm){
        var subcatnmArr = filter.get('selectedSubCategoriesName');
        var subcatIdArr = filter.get('subcategoryIds');

        var index = subcatnmArr.indexOf(subcatnm);

        if(index > -1){
            subcatIdArr.splice(index,1);
            subcatnmArr.splice(index,1);
            //alert(subcatIdArr+' ------ '+subcatnmArr);
            filter.set({'subcategoryIds':subcatIdArr});
            filter.set({'selectedSubCategoriesName':subcatnmArr});
            filter.trigger('change');
        }
    }
    function setSorting(sortBy,sortDir){
        //alert(sortBy+" ========== "+sortDir);
        if(sortBy && sortDir){
            if(sortBy == 'defaultPrice'){
                if(sortDir == 'desc'){
                    sortDir = 'asc';
                }else{
                    sortDir = 'desc';
                }
            }
            filter.set({'sortDir':sortDir});
            filter.set({'sortBy':sortBy});
            filter.trigger('change');
        }
    }
</script>
<script>
    $(function() {
    //alert(filter.get('minPrice')+" ======== "+filter.get('maxPrice'));
    if(filter.get('minPrice') || filter.get('maxPrice')){
        var mnprc = filter.get('minPrice');
        var mxprc = filter.get('maxPrice');
    }else{
        var mnprc = filter.get('minPriceLimit');
        var mxprc = filter.get('maxPriceLimit');
    }

     $( "#slider-range" ).slider({
      range: true,
      min: filter.get('minPriceLimit'),
      max: filter.get('maxPriceLimit'),
      values: [ mnprc, mxprc ],
      slide: function( event, ui ) {
        $( "#amount" ).val( "Rs" + ui.values[ 0 ] + " - " + ui.values[ 1 ] );
        filter.set('minPrice',ui.values[ 0 ]);
        filter.set('maxPrice',ui.values[ 1 ]);
      }
    });

    $( "#amount" ).val( "Rs" + $( "#slider-range" ).slider( "values", 0 ) +
     " - Rs" + $( "#slider-range" ).slider( "values", 1 ) );
  });
  function removePrice(){
    filter.set('minPrice',filter.get('minPriceLimit'));
    filter.set('maxPrice',filter.get('maxPriceLimit'));
  }
  function showFiltersection(){
    $('#filter-section').slideToggle();
     $('#filtered-list').toggle();


  }
  </script>

<!--Facebook share code-->

<!--<div id="fb-root"></div>-->
<!--<script>(function(d, s, id) {-->
  <!--var js, fjs = d.getElementsByTagName(s)[0];-->
  <!--if (d.getElementById(id)) return;-->
  <!--js = d.createElement(s); js.id = id;-->
  <!--js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1393442277626447";-->
  <!--fjs.parentNode.insertBefore(js, fjs);-->
<!--}(document, 'script', 'facebook-jssdk'));</script>-->