<%= console.log("@@@@@@@@@@@@@@@ roomListCreate @@@@@@@@@@@@@@@@@") %>
<%= console.log(roomListCreate) %>

<%= console.log("@@@@@@@@@@@@@@@ getprojects @@@@@@@@@@@@@@@@@") %>
<%= console.log(getprojects) %>

<%= console.log(" **************** spacetypelists ************** ") %>
<%= console.log(spacetypelists) %>
<style>
    .upload-btn-wrapper {
  position: relative;
  overflow: hidden;
  display: inline-block;
}

.btnImage {
  border: 2px solid gray;
  color: gray;
  background-color: white;
  padding: 8px 20px;
  border-radius: 8px;
  font-size: 20px;
  font-weight: bold;
}

.upload-btn-wrapper input[type=file] {
  font-size: 100px;
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
}
</style>
<button type="button" class="closeedit close" data-dismiss="modal" aria-hidden="true">&times;</button>
<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-12">

            <div class="tab">

                <ul class="nav nav-tabs">
                    <li class="active"><a href="#project" data-toggle="tab" id="ProjectTab">Project Details</a></li>
                    <li><a href="#rooms" data-toggle="tab" id="RoomTab">Rooms Details</a></li>
                </ul>

                <div class="tab-content" style="padding: 20px 20px;">
                    <div class="tab-pane active" id="project">
                        <div>
                            <form id="userconceptfrmImage" method="post" name="userconceptfrm" enctype="multipart/form-data">
                                <div class="col-sm-12 col-md-12 col-lg-12">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <div id="list1">
                                                <div class="row display-none" id="addUpload_error_row" style="text-align: center;;">
                                                    <p class="margin0 error-text align-center" id="addUpload_error" style="color: darkred;"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="editprojectName">Project Name:</label>
                                            <input type="text" class="form-control" id="editprojectName" name="projectName" value="<%=getprojects ? getprojects[0].projectName : ''%>" required/>
                                            <div  id="projectNama-error_row" style="font-size: 10px;">
                                                <p  class="err" id="projectNama-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-5 pdn0">
                                            <label for="editinputbuilder">Builder</label>
                                            <input type="text" class="form-control" id="editinputbuilder" placeholder="Builder" value="<%=getprojects ? getprojects[0].builder : ''%>" required />
                                            <div id="inputbuilder-error_row" style="font-size: 10px;">
                                                <p  class="err" id="inputbuilder-error" style="color: darkred;margin-bottom: -10px;"></p>
                                            </div>
                                        </div>
                                        <div class="form-group address-style col-md-5">
                                            <label for="editinputprojecttower">Project Tower</label>
                                            <input type="text" class="form-control" id="editinputprojecttower" placeholder="Project Tower" value="<%=getprojects ? getprojects[0].projectTower : ''%>"  required />
                                            <div id="inputprojecttower-error_row" style="font-size: 10px;">
                                                <p  class="err" id="inputprojecttower-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group address-style ml0 col-md-6 pdn0"  style="margin-right: 14px;">
                                            <label for="editinputProjectAddress">Project Address</label>
                                            <input type="text" class="form-control" id="editinputProjectAddress" placeholder="1234 Main St"  value="<%=getprojects ? getprojects[0].projectAddress : ''%>" required />
                                            <div id="inputProjectAddress-error_row" style="font-size: 10px;">
                                                <p class="err" id="inputProjectAddress-error" style="color: darkred;margin-bottom: -10px;"></p>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="editinputProjectCity">City</label>
                                            <input type="text" class="form-control" id="editinputProjectCity" value="<%=getprojects ? getprojects[0].city : ''%>"  required />
                                            <div id="inputProjectCity-error_row" style="font-size: 10px;">
                                                <p class="err" id="inputProjectCity-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-4 pdn0">
                                            <label for="editinputProjectState">State</label>
                                            <input type="text" class="form-control" id="editinputProjectState" value="<%=getprojects ? getprojects[0].state : ''%>" placeholder="State"  required />
                                            <div id="inputProjectState-error_row" style="font-size: 10px;">
                                                <p class="err" id="inputProjectState-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                        <div class="form-group address-style col-md-3">
                                            <label for="editinputpincode">Pin Code</label>
                                            <input type="number" class="form-control" id="editinputpincode" value="<%=getprojects ? getprojects[0].pin : ''%>" maxlength="6"  required />
                                            <div id="inputpincode-error_row" style="font-size: 10px;">
                                                <p class="err" id="inputpincode-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                        <div class="form-group col-md-3">
                                            <label for="editinputplan">Plan</label>
                                            <input type="text" class="form-control" id="editinputplan" value="<%=getprojects ? getprojects[0].planCode : ''%>" placeholder="Plan" required />
                                            <div id="inputplan-error_row" style="font-size: 10px;">
                                                <p class="err" id="inputplan-error" style="color: darkred;"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="col-md-4 upload-btn-wrapper">
                                            <button class="btnImage">Upload a file</button>
                                            <input id="uploadHomelayout" type="file" name="uploadHome"/>
                                            <label id="file-name"></label>
                                        </div>
                                    </div>

                                </div>

                                <div class="mt15" style="text-align:right;">
                                    <input type="submit" id="save_project" class="btn addcboard-btn" value="Save">
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="tab-pane" id="rooms" >
                        <div class="spaceElemenetPanel"  id="editelements" style="overflow-y:scroll;height:380px;">

                            <% if(typeof(roomListCreate) !== 'undefined'){ %>
                            <% _.each(roomListCreate[0].listOfUserConceptBoard, function(roomlst, j){ %>
                            <div class="col-md-12" style="margin-top: 20px;">
                                <div class="form-group col-md-3">
                                    <label for="editinputcategory">SpaceType</label>
                                    <input type="hidden" value="<%= roomlst.id %>" id="editroomID<%= roomlst.id %>" class="editroomID" />
                                    <select id="editinputcategory<%= roomlst.id %>" class="form-option editcommon">
                                        <option selected>Choose...</option>
                                        <% if(typeof(spacetypelists) !== 'undefined'){ %>
                                        <% _.each(spacetypelists[0].spaceTypeList, function(spaceElement, j){ %>
                                        <option value="<%= spaceElement.code %>" data-element="<%= spaceElement.title %>"
                                        <% if(roomlst.spaceTypeCode == spaceElement.code){ %> selected= "<% spaceElement.title%>" <% } %>
                                        <% if(roomlst.name == "Living Room" && spaceElement.title == "Living"){ %> selected="selected" <% } %>
                                        <% if(roomlst.name == "Bed Room - 1" && spaceElement.title == "Master Bed Room"){ %> selected="selected" <% } %>
                                        <% if(roomlst.name == "Bed Room - 2" && spaceElement.title == "Kids Bed Room"){ %> selected="selected" <% } %>

                                        ><%= spaceElement.title %></option>

                                        <% }); %>
                                        <% } %>
                                    </select>
                                </div>

                                <div class="form-row">
                                    <div class="form-group address-style col-md-3">
                                        <label for="editinputname">Name</label>
                                        <input type="Name" class="form-control editinputname" id="editinputname<%= roomlst.id %>" placeholder="NAME" value="<%=roomlst.name %>">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="editinputname">Description</label>
                                        <input type="Name" class="form-control editdescription" id="editdescription<%= roomlst.id %>" placeholder="DESCRIPTION" value="<%=roomlst.description %>">
                                    </div>
                                </div>
                            </div>
                            <% }); %>
                            <% } %>

                            <div id="editroomspaceElemenet" class="col-md-12" style="margin-top: 20px;display:none;">
                                <div class="form-group col-md-2">
                                    <label for="editinputcategory">SpaceType</label>
                                    <input type="hidden" value="" id="editroomID" class="editroomID" />
                                    <select id="editinputcategory" class="form-option editcommon">
                                        <option selected>Choose...</option>
                                        <% if(typeof(spacetypelists) !== 'undefined'){ %>
                                        <% _.each(spacetypelists[0].spaceTypeList, function(spaceElement, j){ %>
                                        <option value="<%= spaceElement.code %>" data-element="<%= spaceElement.title %>"><%= spaceElement.title %></option>
                                        <% }); %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="form-row">
                                    <div class="form-group address-style col-md-3">
                                        <label for="editinputname">Name</label>
                                        <input type="Name" class="form-control editinputname" id="editinputname" placeholder="NAME">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="editinputname">Description</label>
                                        <input type="Name" class="form-control description" id="editdescription" placeholder="DESCRIPTION">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-12 text-right">
                                <span  id="btn1">
                                    <input type="submit" id="edit_roomConcept" class="btn addcboard-btn" value="Save">
                                </span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-12">
                                <h3>Add Space Type <span id="editSpaceElement" class="glyphicon glyphicon-plus" style="color: #634e42;"></span></h3>
                                <input type="hidden" value="<%= projectId %>" id="editprojectId" />
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
  var current_id = 0;
 var cntclick = 0;
 var cntAdd = 0;
     $('#editSpaceElement').click(function(){
        console.log("add family button clicked  "+cntclick);
        /*if(cntclick >= 2){
            $("#elements").css("overflow-y","scroll");
            $("#elements").css("height","380px");
        }*/
        $('#editroomspaceElemenet').css("display","block");
        nextElement($('#editroomspaceElemenet'));
        cntclick++;

      });

      $(document).ready(function () {
         $("#uploadHomelayout").change(function(){
          $("#file-name").text(this.files[0].name);
        });
     });

    function nextElement(element){
       console.log("inside next element" +element);
        var newElement = element.clone();

        console.log("current_id"+cntclick);
        var id = current_id+1;

        cntAdd = current_id;
        cntAdd = cntAdd + 1;


        newElement.attr("id","member-panel"+current_id);
        var field = $('input', newElement).attr("id");
        $('#editinputcategory', newElement).attr("id","editinputcategory"+cntclick );
        $('#editinputname', newElement).attr("id","editinputname"+cntclick );
        $('#editdescription', newElement).attr("id","editdescription"+cntclick );
        $('#add', newElement).attr("id","add"+cntclick );
        $('#editroomID', newElement).attr("id","editroomID"+cntclick );

        newElement.appendTo($("#editelements"));
    }
</script>