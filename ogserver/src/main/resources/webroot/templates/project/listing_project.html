<% if(typeof(getprojects) !== 'undefined'){ %>
<%= console.log("@@@@@@@@@@@@@@@ getprojects @@@@@@@@@@@@@@@@@") %>
<%= console.log(getprojects) %>
<% } %>

<% if(typeof(roomListCreate) !== 'undefined'){ %>
<%= console.log("@@@@@@@@@@@@@@@ roomListCreate @@@@@@@@@@@@@@@@@") %>
<%= console.log(roomListCreate) %>
<% } %>
<% if(typeof(projectName) !== 'undefined'){ %>
<%= console.log("@@@@@@@@@@@@@@@ projectName @@@@@@@@@@@@@@@@@") %>
<%= console.log(projectName) %>
<% } %>

<%= console.log("@@@@@@@@@@@@@@@ spacetypelists @@@@@@@@@@@@@@@@@") %>
<%= console.log(spacetypelists) %>

<style>

.form-control {
    width: 100%;
    height: 36px;
    padding: 10px 13px;
    background-color: transparent;
    background-image: none;
    border: 1px solid #00000042;
    border-radius: 20px;
    -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
    -webkit-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
}
#projectView{
display:none;
}
#roomDisable{
pointer-events: none;
}
.imgholder{
    text-align: center;
    font-size: 203px;
    }
 .gridProject{
    border-radius: 6px;
	width:100%;
	min-height:100px;
	padding: 0px 0px 15px 0px;
	background:#fff;
	margin:8px;
	font-size:12px;
	float:left;
	box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-moz-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-webkit-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-webkit-transition: top 1s ease, left 1s ease;
    box-sizing: border-box;
    }
     .gridProjectTest{
    border-radius: 6px;
	width:100%;
	min-height:100px;
	padding: 0px 0px 15px 0px;
	background:#fff;
	font-size:12px;
	float:left;
	box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-moz-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-webkit-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
	-webkit-transition: top 1s ease, left 1s ease;
    box-sizing: border-box;
    }
    .sub-title {
	font-family: 'Montserrat', sans-serif;
	font-size: 16px;
	font-weight: 600;
	line-height: 24px;
	margin-top: 10px;
	text-align: left;
}

.form-option{
  width: 100%;
  height: 45px;
  background-color: transparent;
  background-image: none;
  border: 1px solid #eee;
  border-radius: 0;
  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
  -webkit-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
  -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
  transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
}
#imageUploadCreate{
    display:none;
}
.boxcart{
    box-shadow: 0px 0px 10px 4px #ccc;
    border: 20px solid #fff;
}
.title {
	font-family: 'Libre Baskerville', "Times New Roman", Times, Baskerville, Georgia, serif;
	font-size: 32px;
	font-weight: 400;
	line-height: 40px;
	text-align: left;
	text-transform: initial;
	color: #fff;
}

.divider {
	background-color: #fff;
	height: 1px;
	width: 35px;
}

.col-lg-1, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-sm-1, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-xs-1, .col-xs-10, .col-xs-11, .col-xs-12, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .portfolio-container {
	padding-right: 0;
	padding-left: 0;
}

.image {
	display: block;
    height: 265px;
	width: 100%;
}

.overlay {
	background-color: #000;
	bottom: 0;
	height: 100%;
	left: 0;
	opacity: 0;
	position: absolute;
	right: 0;
	transition: .5s ease;
	top: 0;
	width: 100%;
	z-index:1;
}

.cell-container:hover .overlay {
	opacity: .75;
}

.cell-container{
    margin-left: 7px;
    margin-right: 7px;
    margin-top: 7px;
    margin-bottom: 7px;
    width: 31.333333%;
    }

.text {
	color: #fff;
	position: absolute;
	top: 50%;
	left: 50%;
	text-transform: uppercase;
	transform: translate(-50%, -50%);
	-ms-transform: translate(-50%, -50%);
}
.upload-btn-wrapper {
  position: relative;
  overflow: hidden;
  display: inline-block;
}

.btnImage {
  border: 1px solid #bdbdbd;
  color: #bdbdbd;
  background-color: white;
  padding: 5px 32px;
  border-radius: 40px;
  font-size: 20px;
  font-weight: bold;
}

.upload-btn-wrapper input[type=file] {
  font-size: 100px;
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
}
#createProject{
border: 1px dashed #333;
text-align: center;
height: 304px;
box-shadow: 0px 0px 10px 4px #ccc;
border: 20px solid #fff;
}
</style>
<section class="main-conceptboard-sec bg-light-gray">
    <div class="container">
        <div class="mt20">
            <div class="row">
                <div id="createProject" class="col-xs-12 col-sm-6 col-md-4 col-lg-4 cell-container">
                    <p class="title text" style="color: #000f; text-transform: none;">Create Project</p>
                    <div class="overlay"  target="_blank">
                        <div class="text">
                            <span class="imgholder">&#43;</span>
                        </div>
                    </div>
               </div>
                <% if(typeof(getprojects) !== 'undefined'){ %>
                <% var cnt=1; %>
                <% _.each(getprojects[0].userProjects, function(allProjects, i){ %>
                <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 cell-container boxcart">
                    <img class="image" src="/img/building<%= cnt %>.jpg">
                    <a class="overlay" href="javascript:void(0);">
                        <i class="fa fa-times-circle deleteProject" aria-hidden="true" style="font-size: 25px;float:left;color: white;z-index:9;" data-element="<%= allProjects.id %>"></i>
                        <i class="fa fa-pencil-square-o edit_roomList" aria-hidden="true" style="font-size: 25px;float:right;color: white;z-index:9;" data-element="<%= allProjects.id %>"></i>
                        <div><div class="text">
                        <p class="title"><%= allProjects.projectName %></p>
                        <button type="button" style="border:2px solid #fff;padding:10px 20px;background: #000;font-weight:600;" onclick="viewDtls('<%= allProjects.id %>')">View Details</button>
                    </div></div></a>
                </div>
                <% if(cnt >= 5){ cnt=1; } %>
                <% cnt++; }); %>
                <% } %>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="createProject-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog" >
        <div class="addcboard-container">
                <div class="col-sm-12 col-md-12">
                    <h4 class="addcboard-heading">New Project</h4>
                    <div class="tab">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#project" data-toggle="tab" id="HomeTab">Project Details</a></li>
                            <li id="roomDisable"><a href="#rooms" data-toggle="tab" id="FamilyTab">Rooms Details</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="project">
                                <div id="createProject-dtls" class="createProject-container">
                                    <form id="userconceptfrmImage" method="post" name="userconceptfrm" enctype="multipart/form-data">
                                        <div class="col-sm-12 col-md-12" style="margin-top: -25px">
                                            <div class="form-group">
                                                <div id="list1">
                                                <div class="row display-none" id="addUpload_error_row" style="text-align: center;;">
                                                <p class="margin0 error-text align-center" id="addUpload_error" style="color: darkred;"></p>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="projectName">Project Name:</label>
                                                <input type="text" class="form-control" id="projectName" name="projectName" required/>
                                                <div  id="projectNama-error_row" style="font-size: 10px;">
                                                <p  class="err" id="projectNama-error" style="color: darkred;"></p>
                                                </div>
                                            </div>
                                            <h4 class="p-style">Project Details</h4>
                                            <div class="form-row">
                                                <div class="form-group   col-md-7">
                                                <label for="inputbuilder">Builder</label>
                                                <input type="text" class="form-control" id="inputbuilder" placeholder="Builder" required />
                                                <div id="inputbuilder-error_row" style="font-size: 10px;">
                                                <p  class="err" id="inputbuilder-error" style="color: darkred;margin-bottom: -10px;"></p>
                                                </div>
                                                </div>
                                                <div class="form-group address-style col-md-4">
                                                <label for="inputprojecttower">Project Tower</label>
                                                <input type="text" class="form-control" id="inputprojecttower" placeholder="Project Tower"  required />
                                                <div id="inputprojecttower-error_row" style="font-size: 10px;">
                                                <p  class="err" id="inputprojecttower-error" style="color: darkred;"></p>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group  ml0 col-md-7" >
                                                    <label for="inputProjectAddress">Project Address</label>
                                                    <input type="text" class="form-control" id="inputProjectAddress" placeholder="1234 Main St" required />
                                                    <div id="inputProjectAddress-error_row" style="font-size: 10px;">
                                                    <p class="err" id="inputProjectAddress-error" style="color: darkred;margin-bottom: -10px;"></p>
                                                    </div>
                                                </div>
                                                <div class="form-group address-style col-md-4">
                                                    <label for="inputProjectCity">City</label>
                                                    <input type="text" class="form-control" id="inputProjectCity"  required />
                                                    <div id="inputProjectCity-error_row" style="font-size: 10px;">
                                                    <p class="err" id="inputProjectCity-error" style="color: darkred;"></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group col-md-4">
                                                    <label for="inputProjectState">State</label>
                                                    <input type="text" class="form-control" id="inputProjectState" placeholder="State"  required />
                                                    <div id="inputProjectState-error_row" style="font-size: 10px;">
                                                    <p class="err" id="inputProjectState-error" style="color: darkred;"></p>
                                                    </div>
                                                </div>
                                                <div class="form-group address-style col-md-3">
                                                    <label for="inputpincode">Pin Code</label>
                                                    <input type="number" class="form-control" id="inputpincode" maxlength="6"  required />
                                                    <div id="inputpincode-error_row" style="font-size: 10px;">
                                                    <p class="err" id="inputpincode-error" style="color: darkred;"></p>
                                                    </div>
                                                </div>
                                                <!--<div class="form-group col-md-3">
                                                    <label for="inputplan">Plan</label>
                                                    <input type="text" class="form-control" id="inputplan" placeholder="Plan" required />
                                                    <div id="inputplan-error_row" style="font-size: 10px;">
                                                    <p class="err" id="inputplan-error" style="color: darkred;"></p>
                                                    </div>
                                                </div>-->
                                                <div class="col-md-4 address-style upload-btn-wrapper" style="top: 28px;">
                                                    <button class="btnImage">Upload Layout</button>
                                                    <input id="uploadHomelayout" type="file" onchange="readURL(this);" name="uploadHome"/>
                                                    <img style="margin-top: 11px;" id="imageUploadCreate" src="#" alt="your image"/>
                                                    <div ><label id="file-nameUploadCreate"></label></div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                               <!-- <div class="col-md-4 upload-btn-wrapper">
                                                    <button class="btnImage">Upload Layout</button>
                                                    <input id="uploadHomelayout" type="file" onchange="readURL(this);" name="uploadHome"/>
                                                    <img style="margin-top: 11px;" id="blah" src="#" alt="your image"/>
                                                    <div ><label id="file-nameUploadCreate"></label></div>
                                                </div>-->
                                                <div class="mt15 col-md-12" style="text-align:center;">
                                                    <input type="submit" id="save_conceptfileupload" class="btn addcboard-btn" value="Submit">
                                                </div>
                                            </div>
                                        </div>

                                    </form>
                                </div>
                            </div>
                            <div class="tab-pane" id="rooms" >
                                    <div class="form-row">
                                        <div class="form-group ">
                                            <h3>Add Space Type <span id="addSpaceElement" class="glyphicon glyphicon-plus" style="color: #634e42;"></span></h3>
                                            <% if(typeof(projectId) !== 'undefined'){ %>
                                            <input type="hidden" value="<%= projectId %>" id="projectId" />
                                            <% } %>
                                        </div>
                                    </div>
                                    <div class="spaceElemenetPanel"  id="elements" style="overflow-y:scroll;height:380px;">
                                        <% if(typeof(roomListCreate) !== 'undefined'){ %>
                                        <% _.each(roomListCreate[0].listOfUserConceptBoard, function(roomlst, j){ %>
                                        <div class="col-md-12">
                                            <div class="form-group col-md-3">
                                                <label for="inputcategory">SpaceType</label>
                                                <input type="hidden" value="<%= roomlst.id %>" id="roomID<%= roomlst.id %>" class="roomId" />
                                                <select id="inputcategory<%= roomlst.id %>" class="form-option common">
                                                    <option selected>Choose...</option>
                                                    <% if(typeof(spacetypelists) !== 'undefined'){ %>
                                                    <% _.each(spacetypelists[0].spaceTypeList, function(spaceElement, j){ %>
                                                    <option value="<%= spaceElement.code %>" data-element="<%= spaceElement.title %>"
                                                    <% if(roomlst.name == spaceElement.title){ %> selected="selected" <% } %>
                                                    <% if(roomlst.name == "Living Room" && spaceElement.title == "Living"){ %> selected="selected" <% } %>
                                                    <% if(roomlst.name == "Master Bedroom" && spaceElement.title == "Master Bed Room"){ %> selected="selected" <% } %>
                                                    <% if(roomlst.name == "Kids Bedroom" && spaceElement.title == "Kids Bed Room"){ %> selected="selected" <% } %>
                                                    <% if(roomlst.name == "Guest Bedroom" && spaceElement.title == "Bed Room ( others )"){ %> selected="selected" <% } %>

                                                    ><%= spaceElement.title %></option>

                                                    <% }); %>
                                                    <% } %>
                                                </select>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group address-style col-md-4">
                                                    <label for="inputname">Name</label>
                                                    <input type="Name" class="form-control inputname" id="inputname<%= roomlst.id %>" placeholder="NAME">
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <label for="inputname">Description</label>
                                                    <input type="Name" class="form-control description" id="description<%= roomlst.id %>" placeholder="DESCRIPTION">
                                                </div>
                                                <!--<div class="form-group col-md-1" style="margin-left: 56px;margin-top: 28px;">
                                                        <input type="submit" id="<%= roomlst.id %>"  class="btn addcboard-btn updatecreateRoom" value="Update">
                                                </div>-->
                                            </div>
                                        </div>
                                        <% }); %>
                                        <% } %>

                                        <div id="copyspaceElemenet" class="col-md-12" style="margin-top: 20px;display:none;">
                                            <div class="form-group col-md-3">
                                                <label for="inputcategory">SpaceType</label>
                                                <input type="hidden" value="" id="roomID" class="roomId" />
                                                <select id="inputcategory" class="form-option common">
                                                    <option selected>Choose...</option>
                                                    <% if(typeof(spacetypelists) !== 'undefined'){ %>
                                                    <% _.each(spacetypelists[0].spaceTypeList, function(spaceElement, j){ %>
                                                    <option value="<%= spaceElement.code %>" data-element="<%= spaceElement.title %>"><%= spaceElement.title %></option>
                                                    <% }); %>
                                                    <% } %>
                                                </select>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group address-style col-md-3">
                                                    <label for="inputname">Name</label>
                                                    <input type="Name" class="form-control inputname" id="inputname" placeholder="NAME">
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <label for="inputname">Description</label>
                                                    <input type="Name" class="form-control description" id="description" placeholder="DESCRIPTION">
                                                </div>
                                                <!-- <div class="form-group col-md-1" style="margin-left: 56px;margin-top: 28px;">
                                                     <input type="submit" id="add" class="btn addcboard-btn addMoreRoom" value="add">
                                                 </div>-->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-12" style="text-align:center;">
                                            <span  id="btn1">
                                                <input type="submit" id="save_roomConcept" class="btn addcboard-btn" value="Submit">
                                            </span>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>
<div class="modal fade" id="addRoomConcept" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="addcboard-container">
            <h4 class="addcboard-heading">Add Rooms</h4>
            <div id="createroomlist"></div>
        </div>
    </div>
</div>
<div class="modal fade" id="editRoomandProject" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="editProject-container">
            <div class="editContain" id="editRoomeroomlist"></div>
        </div>
    </div>
</div>



<script>
 var current_id = 0;
 var cntclick = 0;
     $('#addSpaceElement').click(function(){
        console.log("add family button clicked  "+cntclick);
        if(cntclick >= 2){
            $("#elements").css("overflow-y","scroll");
            $("#elements").css("height","380px");
        }
        nextElement($('#copyspaceElemenet'));
        cntclick++;
      });

    function nextElement(element){
       console.log("inside next element" +element);
        var newElement = element.clone();
        var id = current_id+1;
        newElement.attr("id","member-panel"+current_id);
        var field = $('input', newElement).attr("id");
        $('#inputcategory', newElement).attr("id","NAME"+current_id );
        $('#inputname', newElement).attr("id","NAME"+current_id );
        $('#description', newElement).attr("id","DESCRIPTION"+current_id );

        newElement.appendTo($("#elements"));
    }

    function viewDtls(projectId){
        //alert(projectId);
        window.App.router.navigate("/rooms-"+projectId, {
             trigger: true
         });
    }

    $(document).ready(function () {
         $("#uploadHomelayout").change(function(){
          $("#file-nameUploadCreate").text(this.files[0].name);
        });
     });

    function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#imageUploadCreate')
                .attr('src', e.target.result)
                .css('display', 'block')
                .width(100)
                .height(100);
        };

        reader.readAsDataURL(input.files[0]);
    }
    }
     $(document).ready(function () {

         $('.close').on('click', function () {
             $('body').removeClass().removeAttr('style');$('.modal-backdrop').remove();
         });

     });
</script>